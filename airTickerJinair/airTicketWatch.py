#-*- coding: utf-8 -*-

import urllib2
from slack_token import WHALE_BOT_TOKEN, CHANNEL
from BeautifulSoup import BeautifulSoup
from slacker import Slacker

url = "https://www.jinair.com/RSV/RSV_ScheduleSelect.aspx"
data = """------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="__EVENTTARGET"


------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="__EVENTARGUMENT"


------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="__VIEWSTATE"

/wEPDwUJNjQwNTU5OTUzD2QWAmYPZBYCAgUPZBYKAgEPDxYEHghJbWFnZVVybAUcL2ltYWdlcy9uZXdNYWluL3RvcF9qb2luLmdpZh4NQWx0ZXJuYXRlVGV4dAUM7ZqM7JuQ6rCA7J6FZGQCAg8PFgQfAAUdL2ltYWdlcy9uZXdNYWluL3RvcF9sb2dpbi5naWYfAQUJ66Gc6re47J24ZGQCAw8PFgIeBFRleHRlZGQCBQ9kFgICAQ9kFgwCAw8PFgIfAAUjL2ltYWdlcy9sZWZ0X21lbnUvQm9va19tZW51MV91cC5naWYWBB4Kb25tb3VzZW91dAUudGhpcy5zcmM9Jy9pbWFnZXMvbGVmdF9tZW51L0Jvb2tfbWVudTFfdXAuZ2lmJx4Lb25tb3VzZW92ZXIFLnRoaXMuc3JjPScvaW1hZ2VzL2xlZnRfbWVudS9Cb29rX21lbnUxX3VwLmdpZidkAgUPFgIeB1Zpc2libGVnFgQCAQ8PFgIfAAUoL2ltYWdlcy9sZWZ0X21lbnUvQm9va19tZW51MV9zdWIxX3VwLmdpZhYEHwMFM3RoaXMuc3JjPScvaW1hZ2VzL2xlZnRfbWVudS9Cb29rX21lbnUxX3N1YjFfdXAuZ2lmJx8EBTN0aGlzLnNyYz0nL2ltYWdlcy9sZWZ0X21lbnUvQm9va19tZW51MV9zdWIxX3VwLmdpZidkAgMPD2QWBB8DBTB0aGlzLnNyYz0nL2ltYWdlcy9sZWZ0X21lbnUvQm9va19tZW51MV9zdWIyLmdpZicfBAUzdGhpcy5zcmM9Jy9pbWFnZXMvbGVmdF9tZW51L0Jvb2tfbWVudTFfc3ViMl91cC5naWYnZAIHDw9kFgQfAwUrdGhpcy5zcmM9Jy9pbWFnZXMvbGVmdF9tZW51L0Jvb2tfbWVudTIuZ2lmJx8EBS50aGlzLnNyYz0nL2ltYWdlcy9sZWZ0X21lbnUvQm9va19tZW51Ml91cC5naWYnZAILDw9kFgQfAwUrdGhpcy5zcmM9Jy9pbWFnZXMvbGVmdF9tZW51L0Jvb2tfbWVudTQuZ2lmJx8EBS50aGlzLnNyYz0nL2ltYWdlcy9sZWZ0X21lbnUvQm9va19tZW51NF91cC5naWYnZAIND2QWBAIBDw9kFgQfAwUudGhpcy5zcmM9Jy9pbWFnZXMvbGVmdF9tZW51L0xlZnRfbWVudV9kb20uZ2lmJx8EBTF0aGlzLnNyYz0nL2ltYWdlcy9sZWZ0X21lbnUvTGVmdF9tZW51X2RvbV91cC5naWYnZAIDDw9kFgQfAwUudGhpcy5zcmM9Jy9pbWFnZXMvbGVmdF9tZW51L0xlZnRfbWVudV9pbnQuZ2lmJx8EBTF0aGlzLnNyYz0nL2ltYWdlcy9sZWZ0X21lbnUvTGVmdF9tZW51X2ludF91cC5naWYnZAIPDw9kFgQfAwUrdGhpcy5zcmM9Jy9pbWFnZXMvbGVmdF9tZW51L0Jvb2tfbWVudTUuZ2lmJx8EBS50aGlzLnNyYz0nL2ltYWdlcy9sZWZ0X21lbnUvQm9va19tZW51NV91cC5naWYnZAIGD2QWFmYPD2QWBB8DBRRNTV9zd2FwSW1nUmVzdG9yZSgpOx8EBVpNTV9zd2FwSW1hZ2UoJ2N0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfYnRuRmFyZURyaXZlbicsJycsJy9pbWFnZXMvUlNWX1RtZW51MDVfdXAuZ2lmJywxKTtkAgYPEA9kFgIeCG9uY2hhbmdlBVBmbl9Eb21lc3RpY0RlcGFydHVyZUFpcnBvcnRfQmluZCgnY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9kZGxBcnJpdmFsJywgZXZlbnQpOw8WBmYCAQICAgMCBAIFFgYQBQbquYDtj6wFB0dNUHxTRUxnEAUG7KCc7KO8BQdDSlV8Q0pVZxAFBuu2gOyCsAUHUFVTfFBVU2cQBQbssq3so7wFB0NKSnxDSkpnEAUG7J247LKcBQdJQ058SUNOZxAFBuyWkeyWkQUHWU5ZfFlOWWdkZAIIDxAPZBYCHwYFJmZuX0RvbWVzdGljQXJyaXZhbEFpcnBvcnRfQmluZChldmVudCk7DxYGZgIBAgICAwIEAgUWBhAFBuq5gO2PrAUHR01QfFNFTGcQBQbsoJzso7wFB0NKVXxDSlVnEAUG67aA7IKwBQdQVVN8UFVTZxAFBuyyreyjvAUHQ0pKfENKSmcQBQbsnbjsspwFB0lDTnxJQ05nEAUG7JaR7JaRBQdZTll8WU5ZZ2RkAgkPZBYCAgEPZBYCAgEPZBYCZg9kFgJmD2QWCgIBDw8WAh8CBQnqsIDripTrgqBkZAIDDxAPZBYCHwYF3QFNb250aF9DbGljayggdGhpcy52YWx1ZSwgICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbFN0YXJ0X3RibERheSIsICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbFN0YXJ0X2xibFllYXJNb250aCIsICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbFN0YXJ0X2RkbFllYXJNb250aCIsICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbFN0YXJ0X2RkbERheSIgKTsNCg8WCWYCAQICAgMCBAIFAgYCBwIIFgkQBQ0yMDE364WEIDA07JuUBQYyMDE3MDRnEAUNMjAxN+uFhCAwNeyblAUGMjAxNzA1ZxAFDTIwMTfrhYQgMDbsm5QFBjIwMTcwNmcQBQ0yMDE364WEIDA37JuUBQYyMDE3MDdnEAUNMjAxN+uFhCAwOOyblAUGMjAxNzA4ZxAFDTIwMTfrhYQgMDnsm5QFBjIwMTcwOWcQBQ0yMDE364WEIDEw7JuUBQYyMDE3MTBnEAUNMjAxN+uFhCAxMeyblAUGMjAxNzExZxAFDTIwMTfrhYQgMTLsm5QFBjIwMTcxMmdkZAIFDxAPZBYCHwYF2wFEYXlfQ2xpY2soIHRoaXMudmFsdWUsICAiY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9jYWxTdGFydF90YmxEYXkiLCAiY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9jYWxTdGFydF9sYmxZZWFyTW9udGgiLCAiY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9jYWxTdGFydF9kZGxZZWFyTW9udGgiLCAiY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9jYWxTdGFydF9kZGxEYXkiICk7DQoPFh9mAgECAgIDAgQCBQIGAgcCCAIJAgoCCwIMAg0CDgIPAhACEQISAhMCFAIVAhYCFwIYAhkCGgIbAhwCHQIeFh8QBQQx7J28BQIwMWcQBQQy7J28BQIwMmcQBQQz7J28BQIwM2cQBQQ07J28BQIwNGcQBQQ17J28BQIwNWcQBQQ27J28BQIwNmcQBQQ37J28BQIwN2cQBQQ47J28BQIwOGcQBQQ57J28BQIwOWcQBQUxMOydvAUCMTBnEAUFMTHsnbwFAjExZxAFBTEy7J28BQIxMmcQBQUxM+ydvAUCMTNnEAUFMTTsnbwFAjE0ZxAFBTE17J28BQIxNWcQBQUxNuydvAUCMTZnEAUFMTfsnbwFAjE3ZxAFBTE47J28BQIxOGcQBQUxOeydvAUCMTlnEAUFMjDsnbwFAjIwZxAFBTIx7J28BQIyMWcQBQUyMuydvAUCMjJnEAUFMjPsnbwFAjIzZxAFBTI07J28BQIyNGcQBQUyNeydvAUCMjVnEAUFMjbsnbwFAjI2ZxAFBTI37J28BQIyN2cQBQUyOOydvAUCMjhnEAUFMjnsnbwFAjI5ZxAFBTMw7J28BQIzMGcQBQUzMeydvAUCMzFnZGQCBw8WAh4Hb25jbGljawXVAU1vbnRoX0NsaWNrKCAtMSwgICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbFN0YXJ0X3RibERheSIsICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbFN0YXJ0X2xibFllYXJNb250aCIsICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbFN0YXJ0X2RkbFllYXJNb250aCIsICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbFN0YXJ0X2RkbERheSIgKTsNCmQCCw8WAh8HBdUBTW9udGhfQ2xpY2soICsxLCAgImN0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfY2FsU3RhcnRfdGJsRGF5IiwgImN0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfY2FsU3RhcnRfbGJsWWVhck1vbnRoIiwgImN0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfY2FsU3RhcnRfZGRsWWVhck1vbnRoIiwgImN0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfY2FsU3RhcnRfZGRsRGF5IiApOw0KZAIKD2QWAgIBD2QWAgIBD2QWAmYPZBYCZg9kFgoCAQ8PFgIfAgUJ7Jik64qU64KgZGQCAw8QD2QWAh8GBdUBTW9udGhfQ2xpY2soIHRoaXMudmFsdWUsICAiY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9jYWxFbmRfdGJsRGF5IiwgImN0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfY2FsRW5kX2xibFllYXJNb250aCIsICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbEVuZF9kZGxZZWFyTW9udGgiLCAiY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9jYWxFbmRfZGRsRGF5IiApOw0KDxYJZgIBAgICAwIEAgUCBgIHAggWCRAFDTIwMTfrhYQgMDTsm5QFBjIwMTcwNGcQBQ0yMDE364WEIDA17JuUBQYyMDE3MDVnEAUNMjAxN+uFhCAwNuyblAUGMjAxNzA2ZxAFDTIwMTfrhYQgMDfsm5QFBjIwMTcwN2cQBQ0yMDE364WEIDA47JuUBQYyMDE3MDhnEAUNMjAxN+uFhCAwOeyblAUGMjAxNzA5ZxAFDTIwMTfrhYQgMTDsm5QFBjIwMTcxMGcQBQ0yMDE364WEIDEx7JuUBQYyMDE3MTFnEAUNMjAxN+uFhCAxMuyblAUGMjAxNzEyZ2RkAgUPEA9kFgIfBgXTAURheV9DbGljayggdGhpcy52YWx1ZSwgICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbEVuZF90YmxEYXkiLCAiY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9jYWxFbmRfbGJsWWVhck1vbnRoIiwgImN0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfY2FsRW5kX2RkbFllYXJNb250aCIsICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbEVuZF9kZGxEYXkiICk7DQoPFh9mAgECAgIDAgQCBQIGAgcCCAIJAgoCCwIMAg0CDgIPAhACEQISAhMCFAIVAhYCFwIYAhkCGgIbAhwCHQIeFh8QBQQx7J28BQIwMWcQBQQy7J28BQIwMmcQBQQz7J28BQIwM2cQBQQ07J28BQIwNGcQBQQ17J28BQIwNWcQBQQ27J28BQIwNmcQBQQ37J28BQIwN2cQBQQ47J28BQIwOGcQBQQ57J28BQIwOWcQBQUxMOydvAUCMTBnEAUFMTHsnbwFAjExZxAFBTEy7J28BQIxMmcQBQUxM+ydvAUCMTNnEAUFMTTsnbwFAjE0ZxAFBTE17J28BQIxNWcQBQUxNuydvAUCMTZnEAUFMTfsnbwFAjE3ZxAFBTE47J28BQIxOGcQBQUxOeydvAUCMTlnEAUFMjDsnbwFAjIwZxAFBTIx7J28BQIyMWcQBQUyMuydvAUCMjJnEAUFMjPsnbwFAjIzZxAFBTI07J28BQIyNGcQBQUyNeydvAUCMjVnEAUFMjbsnbwFAjI2ZxAFBTI37J28BQIyN2cQBQUyOOydvAUCMjhnEAUFMjnsnbwFAjI5ZxAFBTMw7J28BQIzMGcQBQUzMeydvAUCMzFnZGQCBw8WAh8HBc0BTW9udGhfQ2xpY2soIC0xLCAgImN0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfY2FsRW5kX3RibERheSIsICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbEVuZF9sYmxZZWFyTW9udGgiLCAiY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9jYWxFbmRfZGRsWWVhck1vbnRoIiwgImN0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfY2FsRW5kX2RkbERheSIgKTsNCmQCCw8WAh8HBc0BTW9udGhfQ2xpY2soICsxLCAgImN0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfY2FsRW5kX3RibERheSIsICJjdGwwMF9Db250ZW50UGxhY2VIb2xkZXIxX2NhbEVuZF9sYmxZZWFyTW9udGgiLCAiY3RsMDBfQ29udGVudFBsYWNlSG9sZGVyMV9jYWxFbmRfZGRsWWVhck1vbnRoIiwgImN0bDAwX0NvbnRlbnRQbGFjZUhvbGRlcjFfY2FsRW5kX2RkbERheSIgKTsNCmQCCw8QD2QWAh8GBQ1DaGFuZ2VDb250KCk7DxYKZgIBAgICAwIEAgUCBgIHAggCCRYKEAUL7ISx7J24IDDsnbgFATBnEAUL7ISx7J24IDHsnbgFATFnEAUL7ISx7J24IDLsnbgFATJnEAUL7ISx7J24IDPsnbgFATNnEAUL7ISx7J24IDTsnbgFATRnEAUL7ISx7J24IDXsnbgFATVnEAUL7ISx7J24IDbsnbgFATZnEAUL7ISx7J24IDfsnbgFATdnEAUL7ISx7J24IDjsnbgFAThnEAUL7ISx7J24IDnsnbgFATlnZGQCDA8QZA8WCmYCAQICAgMCBAIFAgYCBwIIAgkWChAFC+yGjOyVhCAw7J24BQEwZxAFC+yGjOyVhCAx7J24BQExZxAFC+yGjOyVhCAy7J24BQEyZxAFC+yGjOyVhCAz7J24BQEzZxAFC+yGjOyVhCA07J24BQE0ZxAFC+yGjOyVhCA17J24BQE1ZxAFC+yGjOyVhCA27J24BQE2ZxAFC+yGjOyVhCA37J24BQE3ZxAFC+yGjOyVhCA47J24BQE4ZxAFC+yGjOyVhCA57J24BQE5Z2RkAg0PEGQPFgpmAgECAgIDAgQCBQIGAgcCCAIJFgoQBQvsnKDslYQgMOyduAUBMGcQBQvsnKDslYQgMeyduAUBMWcQBQvsnKDslYQgMuyduAUBMmcQBQvsnKDslYQgM+yduAUBM2cQBQvsnKDslYQgNOyduAUBNGcQBQvsnKDslYQgNeyduAUBNWcQBQvsnKDslYQgNuyduAUBNmcQBQvsnKDslYQgN+yduAUBN2cQBQvsnKDslYQgOOyduAUBOGcQBQvsnKDslYQgOeyduAUBOWdkZAIODxBkDxYKZgIBAgICAwIEAgUCBgIHAggCCRYKEAUO7J6l7JWg7J24IDDsnbgFATBnEAUO7J6l7JWg7J24IDHsnbgFATFnEAUO7J6l7JWg7J24IDLsnbgFATJnEAUO7J6l7JWg7J24IDPsnbgFATNnEAUO7J6l7JWg7J24IDTsnbgFATRnEAUO7J6l7JWg7J24IDXsnbgFATVnEAUO7J6l7JWg7J24IDbsnbgFATZnEAUO7J6l7JWg7J24IDfsnbgFATdnEAUO7J6l7JWg7J24IDjsnbgFAThnEAUO7J6l7JWg7J24IDnsnbgFATlnZGQCDw8QD2QWAh8GBX1qYXZhc2NyaXB0OmFsZXJ0KCfsnqXslaAgMS0z6riJ7J24IOyepeyVoOyduOqzvCDrj5nrsJjtlZjsi5zripQg6rK97Jqw7JeQ66eMIOyepeyVoOuPmeuwmOydhCDshKDtg53tlZjsi5zquLAg67CU656N64uI64ukLicpOw8WBWYCAQICAgMCBBYFEAUR7J6l7JWg64+Z67CYIDDsnbgFATBnEAUR7J6l7JWg64+Z67CYIDHsnbgFATFnEAUR7J6l7JWg64+Z67CYIDLsnbgFATJnEAUR7J6l7JWg64+Z67CYIDPsnbgFATNnEAUR7J6l7JWg64+Z67CYIDTsnbgFATRnZGQCEA8QD2QWAh8GBRxqYXZhc2NyaXB0Ok9wZW5FdGNJbmZvKCdTJyk7DxYKZgIBAgICAwIEAgUCBgIHAggCCRYKEAUL6riw7YOAIDDsnbgFATBnEAUL6riw7YOAIDHsnbgFATFnEAUL6riw7YOAIDLsnbgFATJnEAUL6riw7YOAIDPsnbgFATNnEAUL6riw7YOAIDTsnbgFATRnEAUL6riw7YOAIDXsnbgFATVnEAUL6riw7YOAIDbsnbgFATZnEAUL6riw7YOAIDfsnbgFATdnEAUL6riw7YOAIDjsnbgFAThnEAUL6riw7YOAIDnsnbgFATlnZGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFggFFGN0bDAwJGlidG5Kb2luTXlQYWdlBRJjdGwwMCRpYnRuTG9nSW5PdXQFJ2N0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkYnRuRmFyZURyaXZlbgUfY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRyZG9SVAUfY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRyZG9PVwUnY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRidG5Mb3dlc3RGYXJlBSFjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGJ0bk5leHQFK2N0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkYnRuQXV0aFZhbGlkQ2hlY2vt2iI6QDwxrLq52ZriyLrAQz5mNA==
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="__VIEWSTATEGENERATOR"

734BCEDD
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$rdoItnerary"

0
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$ddlDeparture"

CJU|CJU
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$ddlArrival"

GMP|SEL
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$calStart$ddlYearMonth"

201704
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$calStart$ddlDay"

28
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$ddlAdult"

1
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$ddlChild"

0
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$ddlInfant"

0
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$ddlDisable"

0
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$ddlDisableSub"

0
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$ddlEtc"

0
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$btnNext.x"

23
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$btnNext.y"

10
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$hdnAgendCD"


------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$hdnAgentYn"

N
------WebKitFormBoundaryUAB9MQz8HGYVTZcI
Content-Disposition: form-data; name="ctl00$ContentPlaceHolder1$hdnIsLogin"

N
------WebKitFormBoundaryUAB9MQz8HGYVTZcI--"""

req = urllib2.Request(url)
req.add_header("Host", "www.jinair.com")
req.add_header("Connection", "keep-alive")
req.add_header("Content-Length", len(data))
req.add_header("Pragma", "no-cache")
req.add_header("Cache-Control", "no-cache")
req.add_header("Origin", "https://www.jinair.com")
req.add_header("Upgrade-Insecure-Requests", "1")
req.add_header("User-Agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36")
req.add_header("Content-Type", "multipart/form-data; boundary=----WebKitFormBoundaryUAB9MQz8HGYVTZcI")
req.add_header("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8")
req.add_header("Referer", "https://www.jinair.com/RSV/RSV_ScheduleSelect.aspx")
req.add_header("Accept-Encoding", "gzip, deflate, br")
req.add_header("Accept-Language", "ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4")
req.add_header("Cookie", "ASP.NET_SessionId=c1y0wh451asvlh45jetvbw55; LOG_KEY=20170421144812064; _ga=GA1.2.1470178762.1492753691; _gat=1")
response = urllib2.urlopen(req, data)

doc = response.read()

# HTML 페이지 저장.
# f = open("./doc.html", "w")
# f.write(doc)

soup = BeautifulSoup(doc)
target = soup.findAll("td", style="text-align: right; padding-right: 4px;")


# 파일 저장
for i in xrange(20, 28):
    f = open("./data/" + str(i) + ".txt", "w")
    f.write(str(target[i]))
    f.close()


# 파일 읽기
def get_file(file_name):
    f = open("./data/" + file_name + ".txt", 'r')
    txt = ""
    while True:
        line = f.readline()
        if not line:
            break
        txt = txt + line
    f.close()
    return txt

# 비교 후 슬렉 메세징
for i in xrange(20, 28):
    file_data = get_file(str(i))
    if file_data == str(target[i]):
        print "ok"
    else:
        print "sendSlack"
        print "origin " + "=" * 80
        print file_data
        print "current " + "=" * 80
        print str(target[i])
        token = WHALE_BOT_TOKEN
        slack = Slacker(token)
        slack.chat.post_message(CHANNEL, 'BBOOOO!!')


